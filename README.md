````markdown
# Invoice-Processing-App

Данный репозиторий представляет собой пример приложения для обработки счетов-фактур, реализованного на Node.js с использованием Express и MySQL. Приложение включает в себя регистрацию и аутентификацию пользователей, работу с подписками и обработку PDF-файлов.

## Запуск проекта

### 1. Установка зависимостей

```bash
npm install
```
````

### 2. Настройка базы данных

-   Убедитесь, что у вас установлен MySQL и создана база данных (например, `invoice_processing_app`).
-   В файле `config/database.js` укажите параметры подключения к вашей базе данных (хост, пользователь, пароль, название базы данных).

### 3. Настройка переменных окружения

-   Создайте файл `.env` в корне проекта и добавьте в него следующие переменные:
    ```
    DB_NAME=название_базы_данных
    DB_USER=пользователь_базы_данных
    DB_PASSWORD=пароль_базы_данных
    DB_HOST=хост_базы_данных
    JWT_SECRET=ваш_jwt_секрет
    EMAIL=ваш_email@gmail.com
    EMAIL_PASSWORD=пароль_от_почты
    OPENAI_API_KEY=ваш_openai_api_key
    ```

### 4. Запуск сервера

```bash
npm start
```

Сервер будет доступен по адресу `http://localhost:3000`.

## Роуты API

### Авторизация и регистрация

-   `POST /api/auth/register` - Регистрация нового пользователя.

    -   Пример запроса:
        ```json
        {
            "email": "email@example.com",
            "password": "пароль"
        }
        ```

-   `POST /api/auth/verify` - Подтверждение электронной почты.

    -   Пример запроса:
        ```json
        {
            "email": "email@example.com",
            "verification_code": "код подтверждения"
        }
        ```

-   `POST /api/auth/login` - Вход пользователя.

    -   Пример запроса:
        ```json
        {
            "email": "email@example.com",
            "password": "пароль"
        }
        ```

-   `POST /api/auth/reset-password-request` - Запрос на сброс пароля.

    -   Пример запроса:
        ```json
        {
            "email": "email@example.com"
        }
        ```

-   `POST /api/auth/reset-password` - Сброс пароля.

    -   Пример запроса:
        ```json
        {
            "email": "email@example.com",
            "reset_code": "код сброса",
            "new_password": "новый пароль"
        }
        ```

### Инвойсы

-   `POST /api/invoice/read-invoice` - Чтение и обработка PDF-файла с инвойсом.
    -   Требуется авторизация JWT токеном.
    -   Загрузка файла через поле `file`.

### Подписки

-   `POST /api/subscription/subscribe` - Подписка на план (Lite или Pro).

    -   Требуется авторизация JWT токеном.
    -   Пример тела запроса:
        ```json
        {
            "plan": "Lite"
        }
        ```

-   `GET /api/subscription/check-subscription/:userId` - Проверка подписки пользователя по ID.
    -   Требуется авторизация JWT токеном.

## Примечания

-   Все запросы, кроме регистрации и подтверждения электронной почты, требуют авторизации с помощью JWT токена.
-   Для загрузки файлов используется middleware `multer`.
-   Настройки базы данных указываются в файле `config/database.js`.

## Лицензия

Все права защищены. Запрещено копирование и распространение данного кода без разрешения автора. Подробности в файле [LICENSE](./LICENSE).

Этот гайд поможет вам быстро разобраться в API и начать его использовать. Если у вас возникнут вопросы или проблемы, не стесняйтесь обращаться к документации по использованным технологиям или к разработчикам проекта.
